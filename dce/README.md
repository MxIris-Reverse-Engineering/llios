# Dead Code Elimination

⚠️ [Swift public symbols are always `no_dead_strip`.](https://forums.swift.org/t/why-public-symbols-are-always-no-dead-strip/47264)

## Notes
### .no_dead_strip directive
The assembler directive *.no_dead_strip* symbol_name can be used to specify that a symbol is not to be dead stripped. For example:
```
.no_dead_strip _my_version_string
.cstring
_my_version_string:
.ascii “cctools-501”
```

This can be seen (in object files only) with `nm -m` option and shows up as *[no dead strip]* in the following output:
```
% nm -m x.o
00000000 (__TEXT,__cstring) non-external *[no dead strip]* _my_version_string
```
The *.no_dead_strip* directive is generated by the new compiler when the __attribute__((used)) is specified on a symbol. LLVM assembly language use [@llvm.used](https://llvm.org/docs/LangRef.html#the-llvm-used-global-variable).
In object files, this bit is N_NO_DEAD_STRIP as defined in <mach-o/nlist.h>. And is set in relocatable .o files (MH_OBJECT filetype) only in the n_desc field of an nlist struct.

[Mac OS X Compiler Tools Release Notes](https://opensource.apple.com/source/cctools/cctools-622.5.1/RelNotes/CompilerTools.html?txt)
